/*! HiddenTranslator 0.1.0 | (c) Citorva | License: GNU GPL v3 */
var Translator=function(){function i(t){this.api_key=t}return i.get_text_array=function(){var t=new Array;return function e(t,n){t.childNodes.forEach(function(t){t.nodeType==Node.TEXT_NODE?""!=t.textContent&&i.check_text(t.textContent)&&n.push(t.textContent):t.nodeType!=Node.COMMENT_NODE&&"script"!=t.nodeName&&"style"!=t.nodeName&&e(t,n)})}(document.body,t),t},i.replace_text_by_map=function(t){!function e(t,n){t.childNodes.forEach(function(t){t.nodeType==Node.TEXT_NODE?n.has(t.textContent)&&t.replaceWith(n.get(t.textContent)):e(t,n)})}(document.body,t)},i.to_string=function(t){for(var e="",n=0;n<t.length;n++)0!=n&&(e+="\r\n<>\r\n"),e+=t[n].replace('"','\\"');return e},i.to_array=function(t){return t.split("\r\n<>\r\n")},i.check_text=function(t){for(var e=0;e<t.length;e++)if("\n"!=t[e]&&" "!=t[e])return!0;return!1},i.prototype.check_lang=function(){var t=i.to_string(i.get_text_array()),e=new FormData;e.append("q",t),e.append("key",this.api_key);var n=new XMLHttpRequest;if(n.open("POST","https://translation.googleapis.com/language/translate/v2/detect",!1),n.send(e),200!=n.status)return null;var a=JSON.parse(n.responseText);try{return a.data.detections[0][0].language}catch(t){return null}},i.prototype.available_lang=function(){var t=new FormData;t.append("key",this.api_key);var e=new XMLHttpRequest;if(e.open("GET","https://translation.googleapis.com/language/translate/v2/languages",!1),e.send(t),200!=e.status)return null;var n=JSON.parse(e.responseText);try{return n.data.languages}catch(t){return null}},i.prototype.get_translation_map=function(t,e,n){if(t==e)return null;var a=i.to_string(n),r=new FormData;r.append("q",a),r.append("target",e),r.append("format","text"),r.append("source",t),r.append("key",this.api_key);var o=new XMLHttpRequest;if(o.open("POST","https://translation.googleapis.com/language/translate/v2",!1),o.send(r),200!=o.status)return null;var p=JSON.parse(o.responseText);try{for(var s=i.to_array(p.data.translations[0].translatedText),u=new Map,l=0;l<n.length;l++)u.set(n[l],s[l]);return u}catch(t){return null}},i.prototype.translate_page=function(t,e){if(t==e)return!1;var n=this.get_translation_map(t,e,i.get_text_array());return null!=n&&(i.replace_text_by_map(n),!0)},i}();
